import{a as h}from"./apply-csp-oMEag3sR.js";import{runHTMLAsync as A}from"./run-html-Do8mTV6K.js";import{g as i,L as C}from"./main-xonCUAoo.js";import"./types-Bm40F6nV.js";import"./index-C3jYjnPP.js";import"./create-async-iterator-ggfG9U7o.js";import"./set-additional-globals-CXY3m52s.js";import"./navigation-BRdOV7LN.js";import"./set-safe-area-vars-Bn-pRjCL.js";import"./set-theme-Cu8raYyE.js";async function*G(r,{html:d,widgetId:p,widgetState:l,maxHeight:n,toolInput:c,toolOutput:s,toolResponseMetadata:y,displayMode:u,theme:m,userAgent:g,safeArea:S,csp:f}){try{h(f)}catch(o){throw r.error("Failed to apply CSP",o),o}let t;try{t=i(),t.displayMode=u,t.maxHeight=n,t.theme=m,t.locale=C,t.userAgent=g,t.widget={state:l,props:s,setState:o=>{var e,a;return(a=(e=i())==null?void 0:e.updateWidgetState)==null?void 0:a.call(e,p,o)}},t.toolInput=c,t.toolOutput=s,t.widgetState=l,t.setWidgetState=o=>{var e,a;return(a=(e=i())==null?void 0:e.updateWidgetState)==null?void 0:a.call(e,p,o)},t.toolResponseMetadata=y}catch{}yield*A({sandboxLogger:r,html:d,theme:m,additionalGlobals:t,safeArea:S,transformPosition:null,expectReadySignal:!1})}export{G as runWidgetCode};
