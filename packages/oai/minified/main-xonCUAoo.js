const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/run-user-code-43H9AwFP.js","assets/types-Bm40F6nV.js","assets/create-async-iterator-ggfG9U7o.js","assets/apply-csp-oMEag3sR.js","assets/build-user-code-BDSMC4cG.js","assets/get-html-D9pLuxCy.js","assets/run-widget-code-BQGNBqus.js","assets/run-html-Do8mTV6K.js","assets/index-C3jYjnPP.js","assets/set-additional-globals-CXY3m52s.js","assets/navigation-BRdOV7LN.js","assets/set-safe-area-vars-Bn-pRjCL.js","assets/set-theme-Cu8raYyE.js","assets/validate-react-U1ey7gYO.js","assets/transpile-CEMaQNtT.js","assets/parse-transpile-error-C3Ji_8QS.js"])))=>i.map(i=>d[i]);
var te=Object.defineProperty;var ee=(t,e,n)=>e in t?te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var _=(t,e,n)=>ee(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const ne="modulepreload",re=function(t){return"/"+t},Ct={},C=function(e,n,o){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),i=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=re(c),c in Ct)return;Ct[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const l=document.createElement("link");if(l.rel=u?"stylesheet":ne,u||(l.as="script"),l.crossOrigin="",l.href=c,i&&l.setAttribute("nonce",i),document.head.appendChild(l),u)return new Promise((p,b)=>{l.addEventListener("load",p),l.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return r.then(a=>{for(const i of a||[])i.status==="rejected"&&s(i.reason);return e().catch(s)})},Ft="root",rt=()=>document.getElementById(Ft),oe=()=>{const t=rt();t==null||t.remove()},Pn=()=>{const t=document.createElement("iframe");return t.id=Ft,document.body.appendChild(t),t},se=()=>"userActivation"in window.navigator?window.navigator.userActivation.isActive:!0,Pt=(t,e)=>{var n,o;try{const r=new URL(e,t.href);if(r.hostname!==t.hostname||r.protocol!==t.protocol)return(o=(n=L()).openExternal)==null||o.call(n,{href:r.href}),!0}catch{return}},Mn=({doc:t})=>{const e=t.contentWindow;if(!e)return;const n=r=>{var u,d,l;if(!r.isTrusted)return;(d=(u=L()).sendInstrument)==null||d.call(u,{type:"interaction",label:"click"});const{type:s,target:a}=r;if(s!=="click"||!(a instanceof e.HTMLElement))return;const i=(l=a.closest("a"))==null?void 0:l.getAttribute("href");if(!i)return;const{location:c}=e;Pt(c,i)&&r.preventDefault()},o=r=>{var s,a;r.key==="Escape"&&((a=(s=L()).notifyEscapeKey)==null||a.call(s))};e.addEventListener("keydown",o,{passive:!0}),e.addEventListener("click",n,{capture:!0}),e.open=r=>{if(!r)return null;const{location:s}=e;return Pt(s,r),null}};let wt=null;const ae=new Set(["requestDisplayMode","callCompletion","streamCompletion","sendFollowUpMessage","openExternal"]),ie=t=>{wt=t},L=()=>{if(!wt)throw new Error("Host API not published");return new Proxy(wt,{get(t,e){return ae.has(e)?(...n)=>{var o;return se()?(o=t[e])==null?void 0:o.call(t,...n):console.warn(`Method ${String(e)} called without synchronous user event`)}:e in t?t[e]:()=>{console.warn(`Host API method ${String(e)} not found`)}}})};function ce(t,e="<unknown>"){if(t==null)throw new Error(`${e}: unexpected nullish value: ${JSON.stringify(t)}`);return t}var h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ln(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Et={},it={},ct={};Object.defineProperty(ct,"__esModule",{value:!0});ct.cast=de;ct.get=le;ct.set=fe;const ue=2**32;function de(t){return t<0?t+ue:t}function le(t,e){return t>>e&255}function fe(t,e,n){return t^(t^n<<e)&255<<e}(function(t){var e=h&&h.__createBinding||(Object.create?function(f,y,S,P){P===void 0&&(P=S);var I=Object.getOwnPropertyDescriptor(y,S);(!I||("get"in I?!y.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return y[S]}}),Object.defineProperty(f,P,I)}:function(f,y,S,P){P===void 0&&(P=S),f[P]=y[S]}),n=h&&h.__setModuleDefault||(Object.create?function(f,y){Object.defineProperty(f,"default",{enumerable:!0,value:y})}:function(f,y){f.default=y}),o=h&&h.__importStar||function(f){if(f&&f.__esModule)return f;var y={};if(f!=null)for(var S in f)S!=="default"&&Object.prototype.hasOwnProperty.call(f,S)&&e(y,f,S);return n(y,f),y};Object.defineProperty(t,"__esModule",{value:!0}),t.OFFSET_A=t.OFFSET_B=t.OFFSET_G=t.OFFSET_R=void 0,t.newColor=c,t.from=u,t.toNumber=d,t.getRed=l,t.getGreen=p,t.getBlue=b,t.getAlpha=O,t.setRed=R,t.setGreen=A,t.setBlue=G,t.setAlpha=Z;const r=o(ct),{cast:s,get:a,set:i}=r;t.OFFSET_R=24,t.OFFSET_G=16,t.OFFSET_B=8,t.OFFSET_A=0;function c(f,y,S,P){return(f<<t.OFFSET_R)+(y<<t.OFFSET_G)+(S<<t.OFFSET_B)+(P<<t.OFFSET_A)}function u(f){return c(a(f,t.OFFSET_R),a(f,t.OFFSET_G),a(f,t.OFFSET_B),a(f,t.OFFSET_A))}function d(f){return s(f)}function l(f){return a(f,t.OFFSET_R)}function p(f){return a(f,t.OFFSET_G)}function b(f){return a(f,t.OFFSET_B)}function O(f){return a(f,t.OFFSET_A)}function R(f,y){return i(f,t.OFFSET_R,y)}function A(f,y){return i(f,t.OFFSET_G,y)}function G(f,y){return i(f,t.OFFSET_B,y)}function Z(f,y){return i(f,t.OFFSET_A,y)}})(it);var ut={},g={};Object.defineProperty(g,"__esModule",{value:!0});g.labToXyzd50=Oe;g.xyzd50ToLab=Re;g.oklabToXyzd65=Nt;g.xyzd65ToOklab=$t;g.lchToLab=Vt;g.labToLch=Ut;g.displayP3ToXyzd50=Ae;g.xyzd50ToDisplayP3=Se;g.proPhotoToXyzd50=Ce;g.xyzd50ToProPhoto=Pe;g.adobeRGBToXyzd50=Me;g.xyzd50ToAdobeRGB=Le;g.rec2020ToXyzd50=ze;g.xyzd50ToRec2020=Ie;g.xyzd50ToD65=Ht;g.xyzd65ToD50=Wt;g.xyzd65TosRGBLinear=Be;g.xyzd50TosRGBLinear=De;g.srgbLinearToXyzd50=ve;g.srgbToXyzd50=xe;g.xyzd50ToSrgb=Fe;g.oklchToXyzd50=Ge;g.xyzd50ToOklch=je;const Gt=.9642,jt=1,Xt=.8251;function T(t,e){const n=[0,0,0];for(let o=0;o<3;++o)n[o]=t[o][0]*e[0]+t[o][1]*e[1]+t[o][2]*e[2];return n}class ${constructor(e,n,o=0,r=0,s=0,a=0,i=0){_(this,"g");_(this,"a");_(this,"b");_(this,"c");_(this,"d");_(this,"e");_(this,"f");this.g=e,this.a=n,this.b=o,this.c=r,this.d=s,this.e=a,this.f=i}eval(e){const n=e<0?-1:1,o=e*n;return o<this.d?n*(this.c*o+this.f):n*(Math.pow(this.a*o+this.b,this.g)+this.e)}}const v={sRGB:new $(2.4,1/1.055,.055/1.055,1/12.92,.04045,0,0),sRGB_INVERSE:new $(.416667,1.13728,-0,12.92,.0031308,-.0549698,-0),proPhotoRGB:new $(1.8,1),proPhotoRGB_INVERSE:new $(.555556,1,-0,0,0,0,0),k2Dot2:new $(2.2,1),k2Dot2_INVERSE:new $(.454545,1),rec2020:new $(2.22222,.909672,.0903276,.222222,.0812429,0,0),rec2020_INVERSE:new $(.45,1.23439,-0,4.5,.018054,-.0993195,-0)},x={sRGB:[[.436065674,.385147095,.143066406],[.222488403,.716873169,.06060791],[.013916016,.097076416,.714096069]],sRGB_INVERSE:[[3.134112151374599,-1.6173924597114966,-.4906334036481285],[-.9787872938826594,1.9162795854799963,.0334547139520088],[.07198304248352326,-.2289858493321844,1.4053851325241447]],displayP3:[[.515102,.291965,.157153],[.241182,.692236,.0665819],[-.00104941,.0418818,.784378]],displayP3_INVERSE:[[2.404045155982687,-.9898986932663839,-.3976317191366333],[-.8422283799266768,1.7988505115115485,.016048170293157416],[.04818705979712955,-.09737385156228891,1.2735066448052303]],adobeRGB:[[.60974,.20528,.14919],[.31111,.62567,.06322],[.01947,.06087,.74457]],adobeRGB_INVERSE:[[1.9625385510109137,-.6106892546501431,-.3413827467482388],[-.9787580455521,1.9161624707082339,.03341676594241408],[.028696263137883395,-.1406807819331586,1.349252109991369]],rec2020:[[.673459,.165661,.1251],[.279033,.675338,.0456288],[-.00193139,.0299794,.797162]],rec2020_INVERSE:[[1.647275201661012,-.3936024771460771,-.23598028884792507],[-.6826176165196962,1.647617775014935,.01281626807852422],[.029662725298529837,-.06291668721366285,1.2533964313435522]],xyz:[[1,0,0],[0,1,0],[0,0,1]]};function Mt(t){return t*(Math.PI/180)}function pe(t){return t*(180/Math.PI)}function F(t,e,n,o){return[t.eval(e),t.eval(n),t.eval(o)]}const he=[[.9999999984505198,.39633779217376786,.2158037580607588],[1.0000000088817609,-.10556134232365635,-.06385417477170591],[1.0000000546724108,-.08948418209496575,-1.2914855378640917]],ye=[[.2104542553,.7936177849999999,-.0040720468],[1.9779984951000003,-2.4285922049999997,.4505937099000001],[.025904037099999982,.7827717662,-.8086757660000001]],ge=[[.8190224432164319,.3619062562801221,-.12887378261216414],[.0329836671980271,.9292868468965546,.03614466816999844],[.048177199566046255,.26423952494422764,.6335478258136937]],me=[[1.226879873374156,-.5578149965554814,.2813910501772159],[-.040575762624313734,1.1122868293970596,-.07171106666151703],[-.07637294974672144,-.4214933239627915,1.586924024427242]],be=[[.7976700747153241,.13519395152800417,.03135596341127167],[.28803902352472205,.7118744007923554,8661179538844252e-20],[2739876695467402e-22,-14405226518969991e-22,.825211112593861]],_e=[[1.3459533710138858,-.25561367037652133,-.051116041522131374],[-.544600415668951,1.5081687311475767,.020535163968720935],[-13975622054109725e-22,2717590904589903e-21,1.2118111696814942]],we=[[1.0478573189120088,.022907374491829943,-.050162247377152525],[.029570500050499514,.9904755577034089,-.017061518194840468],[-.00924047197558879,.015052921526981566,.7519708530777581]],Ee=[[.9555366447632887,-.02306009252137888,.06321844147263304],[-.028315378228764922,1.009951351591575,.021026001591792402],[.012308773293784308,-.02050053471777469,1.3301947294775631]],Te=[[3.2408089365140573,-1.5375788839307314,-.4985609572551541],[-.9692732213205414,1.876110235238969,.041560501141251774],[.05567030990267439,-.2040007921971802,1.0571046720577026]];function Oe(t,e,n){let o=(t+16)/116,r=o+e/500,s=o-n/200;function a(i){return i<=.20689655172413793?108/841*(i-16/116):i*i*i}return r=a(r)*Gt,o=a(o)*jt,s=a(s)*Xt,[r,o,s]}function Re(t,e,n){function o(i){return i<=.008856451679035631?841/108*i+16/116:Math.pow(i,1/3)}t=o(t/Gt),e=o(e/jt),n=o(n/Xt);const r=116*e-16,s=500*(t-e),a=200*(e-n);return[r,s,a]}function Nt(t,e,n){const r=T(he,[t,e,n]);return r[0]=r[0]*r[0]*r[0],r[1]=r[1]*r[1]*r[1],r[2]=r[2]*r[2]*r[2],T(me,r)}function $t(t,e,n){const r=T(ge,[t,e,n]);r[0]=Math.pow(r[0],1/3),r[1]=Math.pow(r[1],1/3),r[2]=Math.pow(r[2],1/3);const s=T(ye,r);return[s[0],s[1],s[2]]}function Vt(t,e,n){return n===void 0?[t,0,0]:[t,e*Math.cos(Mt(n)),e*Math.sin(Mt(n))]}function Ut(t,e,n){return[t,Math.sqrt(e*e+n*n),pe(Math.atan2(n,e))]}function Ae(t,e,n){const[o,r,s]=F(v.sRGB,t,e,n),a=[o,r,s];return T(x.displayP3,a)}function Se(t,e,n){const o=[t,e,n],r=T(x.displayP3_INVERSE,o);return F(v.sRGB_INVERSE,r[0],r[1],r[2])}function Ce(t,e,n){const[o,r,s]=F(v.proPhotoRGB,t,e,n);return T(be,[o,r,s])}function Pe(t,e,n){const r=T(_e,[t,e,n]);return F(v.proPhotoRGB_INVERSE,r[0],r[1],r[2])}function Me(t,e,n){const[o,r,s]=F(v.k2Dot2,t,e,n),a=[o,r,s];return T(x.adobeRGB,a)}function Le(t,e,n){const o=[t,e,n],r=T(x.adobeRGB_INVERSE,o);return F(v.k2Dot2_INVERSE,r[0],r[1],r[2])}function ze(t,e,n){const[o,r,s]=F(v.rec2020,t,e,n),a=[o,r,s];return T(x.rec2020,a)}function Ie(t,e,n){const o=[t,e,n],r=T(x.rec2020_INVERSE,o);return F(v.rec2020_INVERSE,r[0],r[1],r[2])}function Ht(t,e,n){return T(Ee,[t,e,n])}function Wt(t,e,n){return T(we,[t,e,n])}function Be(t,e,n){return T(Te,[t,e,n])}function De(t,e,n){const o=[t,e,n];return T(x.sRGB_INVERSE,o)}function ve(t,e,n){const o=[t,e,n];return T(x.sRGB,o)}function xe(t,e,n){const[o,r,s]=F(v.sRGB,t,e,n),a=[o,r,s];return T(x.sRGB,a)}function Fe(t,e,n){const o=[t,e,n],r=T(x.sRGB_INVERSE,o);return F(v.sRGB_INVERSE,r[0],r[1],r[2])}function Ge(t,e,n){const[o,r,s]=Vt(t,e,n),[a,i,c]=Nt(o,r,s);return Wt(a,i,c)}function je(t,e,n){const[o,r,s]=Ht(t,e,n),[a,i,c]=$t(o,r,s);return Ut(a,i,c)}var Xe=h&&h.__createBinding||(Object.create?function(t,e,n,o){o===void 0&&(o=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,o,r)}:function(t,e,n,o){o===void 0&&(o=n),t[o]=e[n]}),Ne=h&&h.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),$e=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Xe(e,t,n);return Ne(e,t),e};Object.defineProperty(ut,"__esModule",{value:!0});ut.parse=Ye;ut.parseHex=kt;ut.parseColor=Yt;const nt=it,m=$e(g),Ve=35,pt=37,Ue=103,dt=110,He=100,We=101,ke=(()=>{const t="(\\w+)",e="[\\s,\\/]",n="([^\\s,\\/]+)",o=`(?:${e}+${n})`;return new RegExp(`${t}\\(
      ${e}*
      ${n}
      ${o}
      ${o}
      ${o}?
      ${o}?
      ${e}*
    \\)`.replace(/\s/g,""))})();function Ye(t){return t.charCodeAt(0)===Ve?kt(t):Yt(t)}function kt(t){let e=0,n=0,o=0,r=255;switch(t.length){case 4:{e=(E(t.charCodeAt(1))<<4)+E(t.charCodeAt(1)),n=(E(t.charCodeAt(2))<<4)+E(t.charCodeAt(2)),o=(E(t.charCodeAt(3))<<4)+E(t.charCodeAt(3));break}case 7:{e=(E(t.charCodeAt(1))<<4)+E(t.charCodeAt(2)),n=(E(t.charCodeAt(3))<<4)+E(t.charCodeAt(4)),o=(E(t.charCodeAt(5))<<4)+E(t.charCodeAt(6));break}case 9:{e=(E(t.charCodeAt(1))<<4)+E(t.charCodeAt(2)),n=(E(t.charCodeAt(3))<<4)+E(t.charCodeAt(4)),o=(E(t.charCodeAt(5))<<4)+E(t.charCodeAt(6)),r=(E(t.charCodeAt(7))<<4)+E(t.charCodeAt(8));break}}return(0,nt.newColor)(e,n,o,r)}function E(t){return(t&15)+9*(t>>6)}function Yt(t){const e=ke.exec(t);if(e===null)throw new Error(`Color.parse(): invalid CSS color: "${t}"`);const n=e[1],o=e[2],r=e[3],s=e[4],a=e[5],i=e[6];switch(n){case"rgb":case"rgba":{const c=ht(o),u=ht(r),d=ht(s),l=a?V(a):255;return(0,nt.newColor)(c,u,d,l)}case"hsl":case"hsla":{const c=yt(o),u=ft(r),d=ft(s),l=a?V(a):255;let p,b,O;if(u===0)p=b=O=Math.round(d*255);else{const R=d<.5?d*(1+u):d+u-d*u,A=2*d-R;p=Math.round(et(A,R,c+1/3)*255),b=Math.round(et(A,R,c)*255),O=Math.round(et(A,R,c-1/3)*255)}return(0,nt.newColor)(p,b,O,l)}case"hwb":{const c=yt(o),u=ft(r),d=ft(s),l=a?V(a):255,p=1,b=.5,O=b+p-b*p,R=2*b-O;let A=Math.round(et(R,O,c+1/3)*255),G=Math.round(et(R,O,c)*255),Z=Math.round(et(R,O,c-1/3)*255);return A=gt(A,u,d),G=gt(G,u,d),Z=gt(Z,u,d),(0,nt.newColor)(A,G,Z,l)}case"lab":{const c=U(o,100),u=U(r,125),d=U(s,125),l=a?V(a):255;return M(l,m.xyzd50ToSrgb(...m.labToXyzd50(c,u,d)))}case"lch":{const c=U(o,100),u=U(r,150),d=yt(s)*360,l=a?V(a):255;return M(l,m.xyzd50ToSrgb(...m.labToXyzd50(...m.lchToLab(c,u,d))))}case"oklab":{const c=U(o,1),u=U(r,.4),d=U(s,.4),l=a?V(a):255;return M(l,m.xyzd50ToSrgb(...m.xyzd65ToD50(...m.oklabToXyzd65(c,u,d))))}case"oklch":{const c=tt(o),u=tt(r),d=tt(s),l=a?V(a):255;return M(l,m.xyzd50ToSrgb(...m.oklchToXyzd50(c,u,d)))}case"color":{const c=o,u=tt(r),d=tt(s),l=tt(a),p=i?V(i):255;switch(c){case"srgb":return M(p,[u,d,l]);case"srgb-linear":return M(p,m.xyzd50ToSrgb(...m.srgbLinearToXyzd50(u,d,l)));case"display-p3":return M(p,m.xyzd50ToSrgb(...m.displayP3ToXyzd50(u,d,l)));case"a98-rgb":return M(p,m.xyzd50ToSrgb(...m.adobeRGBToXyzd50(u,d,l)));case"prophoto-rgb":return M(p,m.xyzd50ToSrgb(...m.proPhotoToXyzd50(u,d,l)));case"rec2020":return M(p,m.xyzd50ToSrgb(...m.rec2020ToXyzd50(u,d,l)));case"xyz":case"xyz-d65":return M(p,m.xyzd50ToSrgb(...m.xyzd65ToD50(u,d,l)));case"xyz-d50":return M(p,m.xyzd50ToSrgb(u,d,l))}}}throw new Error(`Color.parse(): invalid CSS color: "${t}"`)}function ht(t){return t.charCodeAt(t.length-1)===pt?Math.round(parseFloat(t)/100*255):Math.round(parseFloat(t))}function V(t){return Math.round(Ze(t)*255)}function Ze(t){return t.charCodeAt(0)===dt?0:t.charCodeAt(t.length-1)===pt?parseFloat(t)/100:parseFloat(t)}function yt(t){let e=1;switch(t.charCodeAt(t.length-1)){case We:return 0;case He:{t.charCodeAt(Math.max(0,t.length-4))===Ue?e=400:e=2*Math.PI;break}case dt:{e=1;break}default:e=360}return parseFloat(t)/e}function ft(t){return t.charCodeAt(0)===dt?0:parseFloat(t)/100}function tt(t){return t.charCodeAt(0)===dt?0:t.charCodeAt(t.length-1)===pt?parseFloat(t)/100:parseFloat(t)}function U(t,e){return t.charCodeAt(0)===dt?0:t.charCodeAt(t.length-1)===pt?parseFloat(t)/100*e:parseFloat(t)}function et(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function gt(t,e,n){let o=t/255;return o*=1-e-n,o+=e,Math.round(o*255)}function mt(t){return Math.max(0,Math.min(255,t))}function M(t,e){const n=mt(Math.round(e[0]*255)),o=mt(Math.round(e[1]*255)),r=mt(Math.round(e[2]*255));return(0,nt.newColor)(n,o,r,t)}var z={},qe=h&&h.__createBinding||(Object.create?function(t,e,n,o){o===void 0&&(o=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,o,r)}:function(t,e,n,o){o===void 0&&(o=n),t[o]=e[n]}),Ke=h&&h.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Je=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&qe(e,t,n);return Ke(e,t),e};Object.defineProperty(z,"__esModule",{value:!0});z.format=void 0;z.formatHEXA=Zt;z.formatHEX=tn;z.formatRGBA=en;z.toRGBA=nn;z.formatHSLA=rn;z.toHSLA=on;z.formatHWBA=sn;z.toHWBA=an;const Qe=Je(it),{getRed:W,getGreen:k,getBlue:Y,getAlpha:J}=Qe,w=[0,0,0],K=Array.from({length:256}).map((t,e)=>e.toString(16).padStart(2,"0"));z.format=Zt;function Zt(t){return"#"+K[W(t)]+K[k(t)]+K[Y(t)]+K[J(t)]}function tn(t){return"#"+K[W(t)]+K[k(t)]+K[Y(t)]}function en(t){return`rgba(${W(t)} ${k(t)} ${Y(t)} / ${J(t)/255})`}function nn(t){return{r:W(t),g:k(t),b:Y(t),a:J(t)}}function rn(t){qt(W(t),k(t),Y(t));const e=w[0],n=w[1],o=w[2],r=J(t)/255;return`hsla(${e} ${n}% ${o}% / ${r})`}function on(t){qt(W(t),k(t),Y(t));const e=w[0],n=w[1],o=w[2],r=J(t)/255;return{h:e,s:n,l:o,a:r}}function sn(t){Kt(W(t),k(t),Y(t));const e=w[0],n=w[1],o=w[2],r=J(t)/255;return`hsla(${e} ${n}% ${o}% / ${r})`}function an(t){Kt(W(t),k(t),Y(t));const e=w[0],n=w[1],o=w[2],r=J(t)/255;return{h:e,w:n,b:o,a:r}}function qt(t,e,n){t/=255,e/=255,n/=255;const o=Math.max(t,e,n),r=o-Math.min(t,e,n),s=r?o===t?(e-n)/r:o===e?2+(n-t)/r:4+(t-e)/r:0;w[0]=60*s<0?60*s+360:60*s,w[1]=100*(r?o<=.5?r/(2*o-r):r/(2-(2*o-r)):0),w[2]=100*(2*o-r)/2}function Kt(t,e,n){t/=255,e/=255,n/=255;const o=Math.min(t,e,n),r=Math.max(t,e,n),s=1-r;if(r===o){w[0]=0,w[1]=o,w[2]=s;return}let a=t===o?e-n:e===o?n-t:t-e,i=t===o?3:e===o?5:1;w[0]=(i-a/(r-o))/6,w[1]=o,w[2]=s}var Q={},cn=h&&h.__createBinding||(Object.create?function(t,e,n,o){o===void 0&&(o=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,o,r)}:function(t,e,n,o){o===void 0&&(o=n),t[o]=e[n]}),un=h&&h.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dn=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&cn(e,t,n);return un(e,t),e};Object.defineProperty(Q,"__esModule",{value:!0});Q.alpha=pn;Q.darken=hn;Q.lighten=yn;Q.blend=gn;Q.getLuminance=mn;const ln=dn(it),{getRed:ot,getGreen:st,getBlue:at,getAlpha:Jt,setAlpha:fn,newColor:Tt}=ln;function pn(t,e){return fn(t,Math.round(e*255))}function hn(t,e){const n=ot(t),o=st(t),r=at(t),s=Jt(t),a=1-e;return Tt(n*a,o*a,r*a,s)}function yn(t,e){const n=ot(t),o=st(t),r=at(t),s=Jt(t);return Tt(n+(255-n)*e,o+(255-o)*e,r+(255-r)*e,s)}function gn(t,e,n,o=1){const r=(c,u)=>Math.round((c**(1/o)*(1-n)+u**(1/o)*n)**o),s=r(ot(t),ot(e)),a=r(st(t),st(e)),i=r(at(t),at(e));return Tt(s,a,i,255)}function mn(t){const e=ot(t)/255,n=st(t)/255,o=at(t)/255,r=c=>c<=.03928?c/12.92:((c+.055)/1.055)**2.4,s=r(e),a=r(n),i=r(o);return Math.round((.2126*s+.7152*a+.0722*i)*1e3)/1e3}(function(t){var e=h&&h.__createBinding||(Object.create?function(o,r,s,a){a===void 0&&(a=s);var i=Object.getOwnPropertyDescriptor(r,s);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(o,a,i)}:function(o,r,s,a){a===void 0&&(a=s),o[a]=r[s]}),n=h&&h.__exportStar||function(o,r){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&e(r,o,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(it,t),n(ut,t),n(z,t),n(Q,t)})(Et);function H(t,e=document.documentElement){var r;if((r=window.CSS)!=null&&r.number)return CSSNumericValue.parse(t).to("px").value;const n=document.createElement("div");n.style.all="initial",n.style.position="absolute",n.style.width=t,e.appendChild(n);const o=n.getBoundingClientRect().width;return e.removeChild(n),o}const X=4,bn=8;function Lt(t){const{borderWidth:e,borderRadius:n,backgroundColor:o,paddingLeft:r,paddingRight:s,paddingTop:a,paddingBottom:i}=getComputedStyle(t),c=t.getBoundingClientRect(),u=Et.getAlpha(Et.parse(o))===0,d=H(e)>0,l=H(n),p=l?l+X:bn;return u&&!d?{x:c.x+H(r)-X,y:c.y+H(a)-X,width:c.width-H(r)-H(s)+X*2,height:c.height-H(a)-H(i)+X*2,borderRadius:p}:{x:c.x-X,y:c.y-X,width:c.width+X*2,height:c.height+X*2,borderRadius:p}}const _n=t=>{var n,o,r;const e=(r=(o=(n=rt())==null?void 0:n.contentDocument)==null?void 0:o.defaultView)==null?void 0:r.HTMLElement;return t instanceof HTMLElement||!!e&&t instanceof e},wn=t=>{const{sourceName:e,sourcePos:n}=t.dataset;if(!e||!n)return null;const[o,r]=n.split("-"),[s,a]=o.split(":"),[i,c]=r.split(":");return{id:`${e}:${s}:${a}`,name:e,element:t,location:{start:{line:Number(s),col:Number(a)},end:{line:Number(i),col:Number(c)}}}};function zt(t){const e=t.composedPath();for(const n of e){if(!_n(n))continue;const o=wn(n);if(o)return o}return null}class En{constructor(){_(this,"window");_(this,"selectedComponent",null);_(this,"hoveredComponent",null);_(this,"frame",null);_(this,"getBoundingBoxes",()=>{let e=null,n=[];if(this.hoveredComponent){const{element:o}=this.hoveredComponent;e={component:{id:this.hoveredComponent.id,name:this.hoveredComponent.name,location:this.hoveredComponent.location},rect:Lt(o)}}if(this.selectedComponent){const{element:o}=this.selectedComponent;n=[{component:{id:this.selectedComponent.id,name:this.selectedComponent.name,location:this.selectedComponent.location},rect:Lt(o)}]}return{hovered:e,selected:n}});_(this,"measure",()=>{this.frame=requestAnimationFrame(()=>{var e,n;(n=(e=L()).drawBoundingBoxes)==null||n.call(e,this.getBoundingBoxes())})});_(this,"handleMouseOver",e=>{const n=zt(e);this.hoveredComponent=n,this.measure()});_(this,"handlePointerDown",e=>{e.preventDefault(),e.stopPropagation()});_(this,"handleClick",e=>{e.stopPropagation(),e.preventDefault();const n=zt(e);this.selectedComponent=n,this.measure()});_(this,"destroy",()=>{this.removeMouseListeners(),this.window.removeEventListener("scroll",this.measure,{capture:!0}),this.window.removeEventListener("resize",this.measure,{capture:!0}),this.frame!=null&&cancelAnimationFrame(this.frame)});_(this,"enable",()=>{this.removeMouseListeners(),this.window.addEventListener("mouseover",this.handleMouseOver,{passive:!0,capture:!0}),this.window.addEventListener("pointerdown",this.handlePointerDown,{capture:!0}),this.window.addEventListener("click",this.handleClick,{capture:!0})});_(this,"disable",()=>{this.removeMouseListeners()});_(this,"removeMouseListeners",()=>{this.window.removeEventListener("mouseover",this.handleMouseOver,{capture:!0}),this.window.removeEventListener("pointerdown",this.handlePointerDown,{capture:!0}),this.window.removeEventListener("click",this.handleClick,{capture:!0})});var e;this.window=ce((e=rt())==null?void 0:e.contentWindow),this.window.addEventListener("scroll",this.measure,{capture:!0}),this.window.addEventListener("resize",this.measure,{capture:!0})}}const Tn=(t,...e)=>{};class N{constructor(){_(this,"pendingTimers",new Map)}log(e,...n){Tn(e,...n)}error(e,n){console.error("[sandbox]",e,n),L().sendInstrument({type:"error",message:e,error:n})}environmentError(e){if(console.error("[sandbox]",e),e instanceof Error){const{name:o,message:r,stack:s}=e;L().notifyEnvironmentError({name:o,message:r,stack:s});return}const{stack:n}=new Error;try{L().notifyEnvironmentError({name:"Unknown environment error",message:JSON.stringify(e),stack:n})}catch{L().notifyEnvironmentError({name:"Unknown environment error",message:"Failed to stringify error",stack:n})}}count(e,n,o){L().sendInstrument({type:"count",label:e,tags:o,count:n})}time(e){this.pendingTimers.has(e),this.pendingTimers.set(e,performance.now())}timeEnd(e){if(!this.pendingTimers.has(e))return;const n=performance.now(),o=n-(this.pendingTimers.get(e)??n);this.pendingTimers.delete(e),L().sendInstrument({type:"hist",label:e,value:o})}}function On(t){const n=Ot(t,new WeakMap);try{return structuredClone(n)}catch{}return n}function Ot(t,e){if(t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="bigint")return t;if(typeof t=="symbol"||typeof t=="function"||typeof t>"u")return String(t);if(e.has(t))return e.get(t);try{return structuredClone(t)}catch{}const n=Object.prototype.toString.call(t);if(n==="[object Date]")return new Date(t.getTime());if(n==="[object RegExp]")return Rn(t);if(n==="[object ArrayBuffer]")return t.slice(0);if(n==="[object DataView]"){const r=t,s=Ot(r.buffer,e);try{return new DataView(s,r.byteOffset,r.byteLength)}catch{return String(t)}}if(ArrayBuffer.isView(t)&&!(t instanceof DataView))try{const r=t.constructor;if(typeof t.slice=="function")return t.slice();const s=new r(t.length);return s.set(t),s}catch{return String(t)}if(n==="[object Map]"){const r=new Map;e.set(t,r);for(const[s,a]of t)r.set(q(s,e),q(a,e));return r}if(n==="[object Set]"){const r=new Set;e.set(t,r);for(const s of t)r.add(q(s,e));return r}if(typeof Blob<"u"&&t instanceof Blob)try{return typeof File<"u"&&t instanceof File?new File([t],t.name,{type:t.type,lastModified:t.lastModified}):new Blob([t],{type:t.type})}catch{return String(t)}if(typeof URL<"u"&&t instanceof URL)try{return new URL(t.toString())}catch{return String(t)}if(typeof URLSearchParams<"u"&&t instanceof URLSearchParams)try{return new URLSearchParams(t.toString())}catch{return String(t)}if(t instanceof Error){const r=t;let s;try{const a=r.constructor;s=typeof a=="function"?new a(r.message):new Error(r.message)}catch{s=new Error(r.message)}if(s.name=r.name,typeof r.stack=="string"&&(s.stack=r.stack),"cause"in r)try{s.cause=q(r.cause,e)}catch{s.cause=String(r.cause)}for(const a of Object.keys(r))try{s[a]=q(r[a],e)}catch{s[a]=String(r[a])}return s}if(typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof WeakMap<"u"&&t instanceof WeakMap||typeof WeakSet<"u"&&t instanceof WeakSet)return String(t);if(Array.isArray(t)){const r=new Array(t.length);e.set(t,r);for(let s=0;s<t.length;s++)s in t&&(r[s]=q(t[s],e));return r}const o={};e.set(t,o);for(const r of Object.keys(t)){let s;try{s=t[r]}catch(a){s=String(a)}o[r]=q(s,e)}return o}function q(t,e){try{return structuredClone(t)}catch{}return Ot(t,e)}function Rn(t){const e=new RegExp(t.source,t.flags);return e.lastIndex=t.lastIndex,e}const It="ABORT",Bt="CALL",Dt="REJECT",bt="RESOLVE";function D(t,e){const n=s=>{const a=s.data;if(Array.isArray(a)&&a[0]===Bt){s.stopImmediatePropagation();const[i]=s.ports;if(!i)throw new Error("RPCCallMessage must contains a port.");e?async function(){const c=new AbortController;try{i.onmessage=({data:u})=>Array.isArray(u)&&u[0]===It&&c.abort(),i.postMessage([bt,await e.call({signal:c.signal},...a.slice(1))])}catch(u){if(u instanceof Error&&u.name==="DataCloneError")try{i.postMessage([bt,await e.call({signal:c.signal},...On(a.slice(1)))]);return}catch{}i.postMessage([Dt,u])}finally{i.close()}}():(i.postMessage([Dt,new Error("No function was registered on this RPC. This is probably calling a client which do not implement the function.")]),i.close())}};t.addEventListener("message",n),t.start();const o=s=>(...a)=>new Promise((i,c)=>{var l;const{port1:u,port2:d}=new MessageChannel;u.onmessage=p=>{const b=p.data;b[0]===bt?i(b[1]):c(b[1]),u.close()},(l=s==null?void 0:s.signal)==null||l.addEventListener("abort",()=>{u.postMessage([It]),u.close(),c(new Error("Aborted."))}),t.postMessage([Bt,...a],[d,...s.transfer||[]])}),r=o({});return r.withOptions=o,r}const vt="GENERATOR_GENERATE";function xt(t,e){const n=s=>{const a=s.data;if(Array.isArray(a)&&a[0]===vt){if(s.stopImmediatePropagation(),!e)throw new Error("No function was registered on this RPC. This is probably calling a client which do not implement the function.");const[i,c,...u]=a,d=e(...u);D(c.next,d.next.bind(d)),D(c.return,l=>{var p;return((p=d.return)==null?void 0:p.call(d,l))||{done:!0}}),D(c.throw,l=>{var p;return((p=d.throw)==null?void 0:p.call(d,l))||Promise.reject(l)}),D(c.asyncDispose,async()=>{var b,O;const l=Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose"),p=Symbol.dispose||Symbol.for("Symbol.dispose");l in d?await((b=d[l])==null?void 0:b.call(d)):p in d&&((O=d[p])==null||O.call(d))})}};t.addEventListener("message",n),t.start();const o=s=>{let a;return(...i)=>{var At;const{port1:c,port2:u}=new MessageChannel,{port1:d,port2:l}=new MessageChannel,{port1:p,port2:b}=new MessageChannel,{port1:O,port2:R}=new MessageChannel,A={signal:s.signal},G=()=>{c.close(),u.close(),d.close(),l.close(),p.close(),b.close(),O.close(),R.close()},Z=D(c).withOptions(A),f=D(d).withOptions(A),y=D(p).withOptions(A),S=D(O).withOptions(A);let P=!1;const I=async j=>{if(a==null||a(),P)return{done:!0};const St=await j();return St.done&&(P=!0,G()),St},Qt=async j=>{a==null||a(),await j(),P=!0,G(),a=()=>{throw new Error("This generator has been disposed.")}},Rt={next:j=>I(()=>f(j)),return:j=>I(()=>y(j)),throw:j=>I(()=>S(j)),[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")]:()=>Qt(()=>Z()),[Symbol.asyncIterator]:()=>Rt};return t.postMessage([vt,{asyncDispose:u,next:l,return:b,throw:R},...i],[...s.transfer||[],u,l,b,R]),(At=s.signal)==null||At.addEventListener("abort",()=>{a=()=>{throw new Error("This generator has been aborted.")},G()},{once:!0}),Rt}},r=o({});return r.withOptions=o,r}const lt=new URLSearchParams(window.location.search);lt.get("isStorybook");const zn=lt.get("sessionId")??"",_t=lt.get("app")??"",In=lt.get("locale")??"";lt.get("unsafeSkipTargetOriginCheck");const An=()=>_t==="chatgpt"?"https://chatgpt.com":_t==="feather"?"https://feather.openai.com":_t==="skybridge"?"https://skybridge.oaistatic.com":"*",Sn=async(t,e=[])=>{if("serviceWorker"in navigator){const a=await navigator.serviceWorker.getRegistration();if(a)return await a.unregister(),window.location.reload(),null}const n=Object.fromEntries(Object.entries(t).map(([a,i])=>{var d;const{port1:c,port2:u}=new MessageChannel;return i&&(((d=i==null?void 0:i.constructor)==null?void 0:d.name)==="AsyncGeneratorFunction"?xt(c,i):D(c,i)),[a,u]})),o=new MessageChannel;window.parent.postMessage({type:"init",ports:n,replyPort:o.port2},An(),[...Object.values(n),o.port2]);const r=await new Promise(a=>{o.port1.onmessage=i=>a(i.data),o.port1.start()}),s=new Set(e);return Object.fromEntries(Object.entries(r).map(([a,i])=>[a,s.has(a)?xt(i):D(i)]))};let B=null;Sn({async*runUserCode(t){const e=new N;try{const{runUserCode:n}=await C(async()=>{const{runUserCode:o}=await import("./run-user-code-43H9AwFP.js");return{runUserCode:o}},__vite__mapDeps([0,1,2,3]));yield*n(e,t)}catch(n){e.environmentError(n)}},async buildUserCode(t){const e=new N;try{const{buildUserCode:n}=await C(async()=>{const{buildUserCode:o}=await import("./build-user-code-BDSMC4cG.js");return{buildUserCode:o}},__vite__mapDeps([4,5]));return await n(e,t)}catch(n){e.environmentError(n)}return null},async prepareEnvironment(t){const e=new N;try{const{prepareEnvironment:n}=await C(async()=>{const{prepareEnvironment:o}=await import("./prepare-environment-C4www_Nk.js");return{prepareEnvironment:o}},[]);await n(e,t)}catch(n){e.environmentError(n)}},async*runWidgetCode(t){const e=new N;try{const{runWidgetCode:n}=await C(async()=>{const{runWidgetCode:o}=await import("./run-widget-code-BQGNBqus.js");return{runWidgetCode:o}},__vite__mapDeps([6,3,7,1,8,2,9,10,11,12]));yield*n(e,t)}catch(n){e.environmentError(n)}},async validate(t,e){const n=new N;try{const{validateReact:o}=await C(async()=>{const{validateReact:r}=await import("./validate-react-U1ey7gYO.js");return{validateReact:r}},__vite__mapDeps([13,1,7,8,2,9,10,11,12,5,14]));return await o(n,t,e),!0}catch(o){const{parseAndLogTranspileError:r}=await C(async()=>{const{parseAndLogTranspileError:s}=await import("./parse-transpile-error-C3Ji_8QS.js");return{parseAndLogTranspileError:s}},__vite__mapDeps([15,14,8]));return r(n,o)??!1}},stop(){B==null||B.destroy(),B=null,oe()},setEditMode:t=>{try{B??(B=new En)}catch{return}t?B.enable():(B==null||B.destroy(),B=null)},async screenshot(){var a;const t=rt();if(!t)return null;const e=(a=t.contentDocument)==null?void 0:a.documentElement;if(!e)return null;const n=e.scrollLeft||0,o=e.scrollTop||0,{domToDataUrl:r}=await C(async()=>{const{domToDataUrl:i}=await import("./index-CSSI_kxh.js");return{domToDataUrl:i}},[]);return{imageBase64:await r(e,{backgroundColor:"transparent"}),scrollX:n,scrollY:o}},async setAdditionalGlobals({additionalGlobals:t}){const e=new N;try{const{setAdditionalGlobals:n}=await C(async()=>{const{setAdditionalGlobals:o}=await import("./set-additional-globals-CXY3m52s.js");return{setAdditionalGlobals:o}},__vite__mapDeps([9,1]));n({additionalGlobals:t,sandboxLogger:e})}catch(n){e.environmentError(n)}},async setWidgetProps({widgetId:t,widgetState:e,toolInput:n,toolOutput:o,toolResponseMetadata:r}){const s=new N;try{const{setAdditionalGlobals:a}=await C(async()=>{const{setAdditionalGlobals:i}=await import("./set-additional-globals-CXY3m52s.js");return{setAdditionalGlobals:i}},__vite__mapDeps([9,1]));a({additionalGlobals:{widget:{state:e,props:o,setState:i=>{var c,u;return(u=(c=L())==null?void 0:c.updateWidgetState)==null?void 0:u.call(c,t,i)}},toolInput:n,toolOutput:o,widgetState:e,toolResponseMetadata:r,setWidgetState:i=>{var c,u;return(u=(c=L())==null?void 0:c.updateWidgetState)==null?void 0:u.call(c,t,i)}},sandboxLogger:s})}catch(a){s.environmentError(a)}},async setTheme({theme:t}){const e=new N;try{const{setAdditionalGlobals:n}=await C(async()=>{const{setAdditionalGlobals:r}=await import("./set-additional-globals-CXY3m52s.js");return{setAdditionalGlobals:r}},__vite__mapDeps([9,1])),{setTheme:o}=await C(async()=>{const{setTheme:r}=await import("./set-theme-Cu8raYyE.js");return{setTheme:r}},[]);o({theme:t}),n({additionalGlobals:{theme:t},sandboxLogger:e})}catch(n){e.environmentError(n)}},async setSafeArea({safeArea:t}){const e=new N;try{const{setAdditionalGlobals:n}=await C(async()=>{const{setAdditionalGlobals:r}=await import("./set-additional-globals-CXY3m52s.js");return{setAdditionalGlobals:r}},__vite__mapDeps([9,1])),{setSafeAreaVars:o}=await C(async()=>{const{setSafeAreaVars:r}=await import("./set-safe-area-vars-Bn-pRjCL.js");return{setSafeAreaVars:r}},[]);o({safeArea:t}),n({additionalGlobals:{safeArea:t},sandboxLogger:e})}catch(n){e.environmentError(n)}},async navigate(t){const{navigation:e}=await C(async()=>{const{navigation:n}=await import("./navigation-BRdOV7LN.js");return{navigation:n}},[]);if("delta"in t){e.go(t.delta);return}if("popToRoot"in t){e.popToRoot();return}},getCurrentPath(){var t,e;return((e=(t=rt())==null?void 0:t.contentWindow)==null?void 0:e.location.pathname)??null}},["streamCompletion"]).then(t=>{t&&ie(t)});export{In as L,zn as S,C as _,rt as a,Ln as b,h as c,L as g,Pn as r,Mn as u};
